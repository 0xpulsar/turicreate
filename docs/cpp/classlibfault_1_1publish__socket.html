<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Turi Create: libfault::publish_socket Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlibfault_1_1publish__socket.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classlibfault_1_1publish__socket-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">libfault::publish_socket Class Reference<div class="ingroups"><a class="el" href="group__fault.html">Fault Resistant Communication Library</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="fault_2sockets_2publish__socket_8hpp_source.html">fault/sockets/publish_socket.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6c1fad607b35f0d0379d738be8370e75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#a6c1fad607b35f0d0379d738be8370e75">publish_socket</a> (void *zmq_ctx, <a class="el" href="classturi_1_1zookeeper__util_1_1key__value.html">turi::zookeeper_util::key_value</a> *keyval, std::string alternate_bind_address=&quot;&quot;)</td></tr>
<tr class="separator:a6c1fad607b35f0d0379d738be8370e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e141c53fb9ff22cedf0f8f933469eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#ac8e141c53fb9ff22cedf0f8f933469eb">close</a> ()</td></tr>
<tr class="separator:ac8e141c53fb9ff22cedf0f8f933469eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f64f41261ec094b748bb15dbc2eb10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#a81f64f41261ec094b748bb15dbc2eb10">send</a> (<a class="el" href="classlibfault_1_1zmq__msg__vector.html">zmq_msg_vector</a> &amp;msg)</td></tr>
<tr class="separator:a81f64f41261ec094b748bb15dbc2eb10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff490aa5b268d5b93bc707121cb3d51"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#afff490aa5b268d5b93bc707121cb3d51">register_key</a> (std::string key)</td></tr>
<tr class="separator:afff490aa5b268d5b93bc707121cb3d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3d44d4b31deee0d390078be3ad16d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#a1a3d44d4b31deee0d390078be3ad16d6">reserve_key</a> (std::string key)</td></tr>
<tr class="separator:a1a3d44d4b31deee0d390078be3ad16d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0442494defd11b9a997f1af3439b49dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#a0442494defd11b9a997f1af3439b49dc">unregister_key</a> (std::string key)</td></tr>
<tr class="separator:a0442494defd11b9a997f1af3439b49dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecaa745d7ad1d8994db9eb70632bf70b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#aecaa745d7ad1d8994db9eb70632bf70b">unregister_all_keys</a> ()</td></tr>
<tr class="separator:aecaa745d7ad1d8994db9eb70632bf70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2abac4d238db067f0e0f2653255f48"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibfault_1_1publish__socket.html#aea2abac4d238db067f0e0f2653255f48">get_bound_address</a> ()</td></tr>
<tr class="separator:aea2abac4d238db067f0e0f2653255f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Constructs a zookeeper backed publish socket. This object is very much single threaded. Sends to this socket will be received by all machines subscribed to the socket.</p>
<div class="fragment"><div class="line"><a class="code" href="classlibfault_1_1publish__socket.html#a6c1fad607b35f0d0379d738be8370e75">publish_socket</a> pubsock(zmq_ctx, NULL, listen_addr);</div><div class="line">pubsock.send(...);</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="fault_2sockets_2publish__socket_8hpp_source.html#l00035">35</a> of file <a class="el" href="fault_2sockets_2publish__socket_8hpp_source.html">publish_socket.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6c1fad607b35f0d0379d738be8370e75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libfault::publish_socket::publish_socket </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>zmq_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classturi_1_1zookeeper__util_1_1key__value.html">turi::zookeeper_util::key_value</a> *&#160;</td>
          <td class="paramname"><em>keyval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>alternate_bind_address</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a request socket. The request will be sent to the current owners of the key</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zmq_ctx</td><td>A zeroMQ Context </td></tr>
    <tr><td class="paramname">keyval</td><td>A zookeeper key_value object to bind to </td></tr>
    <tr><td class="paramname">alternate_bind_address</td><td>If set, this will be address to bind to. Otherwise, binds to a free tcp address.</td></tr>
  </table>
  </dd>
</dl>
<p>keyval can be NULL, in which case, the alternate_bind_address must be provided, in which case this socket behaves like a simple messaging wrapper around ZeroMQ which provides a publish socket. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac8e141c53fb9ff22cedf0f8f933469eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libfault::publish_socket::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes this socket. Once closed, the socket cannot be used again. </p>

</div>
</div>
<a class="anchor" id="aea2abac4d238db067f0e0f2653255f48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string libfault::publish_socket::get_bound_address </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the address the socket is bound to </p>

</div>
</div>
<a class="anchor" id="afff490aa5b268d5b93bc707121cb3d51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libfault::publish_socket::register_key </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to register this socket under a given object key. Returns true on success and false on failure. Only relevant when zookeeper is used. Otherwise this will always return true. </p>

</div>
</div>
<a class="anchor" id="a1a3d44d4b31deee0d390078be3ad16d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libfault::publish_socket::reserve_key </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like register, but sets the key to an empty value. Reserves ownership of the key, but prohibits people from joining. Only relevant when zookeeper is used. Otherwise this will always return true. </p>

</div>
</div>
<a class="anchor" id="a81f64f41261ec094b748bb15dbc2eb10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libfault::publish_socket::send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibfault_1_1zmq__msg__vector.html">zmq_msg_vector</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a message. All subscribers which match the message (by prefix) will receive a copy. </p>

</div>
</div>
<a class="anchor" id="aecaa745d7ad1d8994db9eb70632bf70b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libfault::publish_socket::unregister_all_keys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unregisters all keys this socket was registered under. Only relevant when zookeeper is used. Otherwise this will always return true. </p>

</div>
</div>
<a class="anchor" id="a0442494defd11b9a997f1af3439b49dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libfault::publish_socket::unregister_key </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to unregister this socket from a given object key. Returns true on success and false on failure. Only relevant when zookeeper is used. Otherwise this will always return true. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fault/sockets/<a class="el" href="fault_2sockets_2publish__socket_8hpp_source.html">publish_socket.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>libfault</b></li><li class="navelem"><a class="el" href="classlibfault_1_1publish__socket.html">publish_socket</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
